# Proof of Concept: GitOps з використанням K3d та ArgoCD

## Мета

Цей документ містить інструкції для PoC, мета якого — продемонструвати можливість розгортання GitOps-системи на базі Kubernetes (K3d) з використанням ArgoCD. Система готова до реалізації MVP проекту AsciiArtify.

## Передумови

Для виконання інструкцій необхідно мати встановлені наступні інструменти:

* **K3d** (рекомендована версія v5.6.0+): Легкий Kubernetes, ідеальний для локальної розробки та PoC.
* **kubectl**: Для взаємодії з кластером Kubernetes.
* **argocd CLI** (опційно, для роботи з командного рядка).

> **Перевага для AsciiArtify:** K3d працює на архітектурі ARM64 (Mac M-серії) і вимагає мінімум ресурсів, що ідеально підходить для розробки.

## Крок 1: Створення Kubernetes кластера за допомогою K3d

Ця команда створить локальний кластер з одним сервером, одним агентом та вбудованим балансувальником навантаження (LoadBalancer). Порт `8080` на хості буде зіставлений з портом `80` балансувальника, забезпечуючи зовнішній доступ[citation:2].

```bash
k3d cluster create asciiartify-poc \
  --servers 1 \
  --agents 1 \
  --port "8080:80@loadbalancer"

## Крок 2: Налаштування доступу до веб-інтерфейсу ArgoCD

За замовчуванням сервіс argocd-server не доступний зовні. Для PoC найпростіший спосіб — використання порт-форвардингу (port-forwarding).

Запустіть порт-форвардинг у окремому терміналі, щоб відкрити доступ до інтерфейсу ArgoCD на localhost:8080:

```bash
kubectl port-forward svc/argocd-server -n argocd 8080:443
Залиште цей процес запущеним для доступу до UI.

Отримайте початковий пароль адміністратора. Пароль автоматично генерується і зберігається у секреті:

```bash
kubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath="{.data.password}" | base64 -d; echo
Запишіть цей пароль.

## Крок 3: Доступ до графічного інтерфейсу ArgoCD
Відкрийте браузер і перейдіть за адресою: https://localhost:8080

На екрані входу:

Username: admin

Password: Вставте пароль, отриманий на попередньому кроці.

Прийміть попередження про самопідписаний сертифікат (це безпечно для PoC).

Очікуваний результат: Ви увійдете в головну панель керування ArgoCD, яка виглядає приблизно так.

Важлива рекомендація з безпеки: Для виробничого середовища обов'язково змініть пароль за замовчуванням за допомогою CLI (argocd account update-password) або видаліть секрет argocd-initial-admin-secret після першого входу.
